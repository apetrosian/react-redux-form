<script>

  "use strict";

  function usersComparator(userA, userB) {
      if(userA.registrationDate !== userB.registrationDate) {
          return userA.registrationDate - userB.registrationDate;
      }
      return userA.requestedAmount - userB.requestedAmount;
  }

  function groupUsers(users) {
    return users.reduce((group, item) => {
        if(!group[+item.active]) {
          group[+item.active] = [];
        }
        group[+item.active].push(item);
        return group;
    }, []);
  }

  function sortUsers(users) {
    // sorting in avarage scenario may take avarage n*logn time
    // grouping users and then sorting separatly should be more effisient
    return [].concat.apply([], groupUsers(users).map((item) => {
      return item.sort(usersComparator);
    }));
  }


  const result = sortUsers([
      {id: 2, active: false, registrationDate: new Date(2016, 11, 1), requestedAmount: 10000},
      {id: 1, active: false, registrationDate: new Date(2016, 10, 15), requestedAmount: 5000},
      {id: 3, active: true,  registrationDate: new Date(2016, 10, 14), requestedAmount: 5000},
      {id: 5, active: true,  registrationDate: new Date(2017, 0, 2), requestedAmount: 5000},
      {id: 4, active: true,  registrationDate: new Date(2016, 10, 14), requestedAmount: 5500},
  ]);

  // test result
  result.map((item) => {
    console.log(item.id);
  })

</script>
